<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>KING Store Ultimate</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="style.css" />
<style>
/* Color Scheme - White Background, Mocca & Terracotta Theme */
body { background: #ffffff; }

/* Header - Mocca Tua (#105) */
.header { background: linear-gradient(135deg, #5D4037 0%, #4E342E 100%); }

/* Buyer View - Mocca Tua (#105) + Terakota (#042) */
.buyer-view {
  background: linear-gradient(180deg, #5D4037 0%, #4E342E 30%, #D84315 70%, #BF360C 100%);
  min-height: 100vh;
}

/* Chatbot - Terakota (#042) */
.chatbot-panel { background: linear-gradient(180deg, #BF360C 0%, #D84315 100%); }

/* Seller View - Terakota (#042) */
.seller-view { background: linear-gradient(180deg, #D84315 0%, #BF360C 100%); min-height: 100vh; }

/* Cart Button */
.cart-btn { background: linear-gradient(135deg, #D84315 0%, #BF360C 100%); }

/* Premium Badge */
.premium-badge { background: linear-gradient(135deg, #8D6E63 0%, #6D4C41 100%); }

/* Category Button Active */
.category-btn.active {
  background: linear-gradient(135deg, #D84315 0%, #BF360C 100%);
  color: white;
}

/* Menu Card */
.menu-card {
  background: white;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  transition: .3s;
  border: 1px solid #eee;
}
.menu-card:hover { transform: translateY(-6px); box-shadow: 0 10px 30px rgba(216, 67, 21, 0.2); }

/* Cart Modal */
.cart-modal-bg { background: rgba(93, 64, 55, 0.7); }
.cart-content { background: #fff; border: 2px solid #D84315; }

/* Toast */
.toast-success { background: linear-gradient(135deg, #D84315 0%, #BF360C 100%); }
.toast-error { background: linear-gradient(135deg, #c62828 0%, #b71c1c 100%); }

/* Menu Image */
.menu-image {
  width: 100%;
  height: 180px;
  object-fit: cover;
  opacity: 1;
  transition: .4s;
}
.menu-image.loaded { opacity: 1; }

/* Skeleton Loading */
.skeleton {
  background: linear-gradient(90deg, #eeeeee 25%, #dddddd 50%, #eeeeee 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}
@keyframes shimmer { 0%{background-position:-200% 0;} 100%{background-position:200% 0;} }

/* Smooth Animations (optional) */
@keyframes bounceIn { from { transform: translate(-50%, -10px) scale(0.98); opacity: 0; } to { transform: translate(-50%, 0) scale(1); opacity: 1; } }
.animate-bounce-in { animation: bounceIn .25s ease-out; }
@keyframes fadeOut { to { opacity: 0; transform: translate(-50%, -6px); } }
.animate-fade-out { animation: fadeOut .3s ease-in; }
</style>
</head>

<body class="min-h-screen">

<!-- HEADER -->
<div class="header shadow-sm sticky top-0 z-50">
  <div class="max-w-6xl mx-auto flex justify-between items-center p-4">
    <h1 class="text-xl font-bold text-white">ğŸ‘‘ KING Store</h1>
    <div class="flex gap-2">
      <button onclick="switchView('buyer')" class="px-4 py-2 bg-orange-700 text-white rounded-xl text-sm hover:bg-orange-800 transition-colors">Buyer</button>
      <button onclick="switchView('seller')" class="px-4 py-2 bg-white text-orange-800 rounded-xl text-sm hover:bg-orange-50 border border-orange-300 transition-colors">Seller</button>
    </div>
  </div>
</div>

<!-- BUYER VIEW -->
<div id="buyer-view" class="buyer-view p-5">

  <!-- CATEGORY FILTERS -->
  <div id="category-container" class="flex gap-2 overflow-x-auto pb-4 mb-4 no-scrollbar">
    <button onclick="filterByPrice('all')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-white text-orange-800 hover:bg-orange-100 border border-orange-300" data-price="all">ğŸ’° All Prices</button>
    <button onclick="filterByPrice('under50')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-white text-orange-800 hover:bg-orange-100 border border-orange-300" data-price="under50">ğŸ’µ Prices < 50rb</button>
  </div>

  <!-- SEARCH FOOD -->
  <div class="mb-6">
    <input id="searchInput" type="text" placeholder="Search food..."
      class="w-full p-3 border-2 border-orange-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 bg-white"
      oninput="searchMenu()" />
  </div>

  <!-- MENU GRID -->
  <div id="menu-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>

  <!-- CART BUTTON -->
  <div class="fixed bottom-6 right-6">
    <button onclick="toggleCart()"
      class="cart-btn text-white px-5 py-3 rounded-full shadow-lg hover:shadow-xl transition-shadow">
      ğŸ›’ <span id="cart-count">0</span>
    </button>
  </div>

  <!-- FLOATING CHATBOT BUTTON -->
  <button onclick="openChatbot()"
    class="fixed bottom-6 left-6 bg-gradient-to-r from-orange-600 to-orange-700 text-white px-5 py-3 rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-110 z-40 flex items-center gap-2">
    <span class="text-xl">ğŸ’¬</span>
    <span class="font-bold text-sm hidden md:inline">Chat</span>
  </button>

  <!-- CART MODAL -->
  <div id="cart-modal" class="hidden fixed inset-0 cart-modal-bg flex items-center justify-center">
    <div class="cart-content w-96 p-6 rounded-2xl shadow-2xl">
      <h2 class="font-bold mb-4 text-orange-900">Shopping Cart</h2>
      <div id="cart-items"></div>
      <div class="mt-4 font-bold text-orange-900">
        Total: Rp <span id="cart-total">0</span>
      </div>
      <button onclick="checkout()"
        class="mt-4 w-full bg-orange-700 text-white py-3 rounded-xl font-bold hover:bg-orange-800 transition-colors">
        Checkout
      </button>
      <button onclick="toggleCart()"
        class="mt-2 w-full bg-orange-100 text-orange-800 py-2 rounded-xl border border-orange-300 hover:bg-orange-200 transition-colors">
        Cancel
      </button>
    </div>
  </div>

</div>

  <!-- SELLER VIEW -->
  <div id="seller-view" class="seller-view hidden max-w-5xl mx-auto p-6">
    <h2 class="text-xl font-bold mb-4 text-white">Order Management</h2>
    <div id="orders-list"></div>
  </div>

<!-- CHATBOT PANEL -->
<div id="chatbot-panel" class="chatbot-panel fixed right-0 top-0 h-full w-80 shadow-2xl z-50 flex flex-col transform transition-transform duration-300">
  <div class="bg-gradient-to-r from-orange-900 to-orange-700 text-white p-4 flex justify-between items-center">
    <div class="font-bold">ğŸ’¬ Chatbot KING Store</div>
    <button onclick="toggleChatbot()" class="text-white hover:text-orange-200">â”€</button>
  </div>

  <div id="chatbot-messages" class="flex-1 overflow-y-auto p-4" style="background: linear-gradient(180deg, #fff3e0 0%, #ffe0b2 100%);">
    <div class="mb-3">
      <div class="bg-orange-700 text-white inline-block px-4 py-2 rounded-2xl rounded-br-sm text-sm">
        Hello! Please select the menu you want to order ğŸ‘‹
      </div>
    </div>

    <div class="space-y-2 mb-3">
      <p class="text-xs text-orange-700 font-medium">Select menu category:</p>
      <div class="grid grid-cols-2 gap-2">
        <button onclick="selectFromChatbot('soup')" class="bg-orange-100 hover:bg-orange-200 text-orange-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸ² Soup</button>
        <button onclick="selectFromChatbot('fried rice')" class="bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸ› Fried Rice</button>
        <button onclick="selectFromChatbot('noodles')" class="bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸœ Noodles</button>
        <button onclick="selectFromChatbot('drink')" class="bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸ§‹ Drinks</button>
        <button onclick="selectFromChatbot('sweet')" class="bg-pink-100 hover:bg-pink-200 text-pink-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸ° Dessert</button>
        <button onclick="selectFromChatbot('snack')" class="bg-red-100 hover:bg-red-200 text-red-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸŸ Snack</button>
        <button onclick="selectFromChatbot('under50')" class="bg-orange-100 hover:bg-orange-200 text-orange-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸ’µ < 50rb</button>
        <button onclick="selectFromChatbot('all')" class="bg-purple-100 hover:bg-purple-200 text-purple-800 px-3 py-2 rounded-lg text-xs font-medium transition-colors">ğŸ½ï¸ All Menu</button>
      </div>
    </div>

    <div id="chatbot-selected-items" class="hidden mb-3">
      <p class="text-xs text-orange-700 font-medium mb-2">Your order:</p>
      <div id="chatbot-items-list" class="space-y-2"></div>
    </div>

    <div id="chatbot-total-section" class="hidden bg-gradient-to-r from-orange-700 to-orange-600 text-white p-3 rounded-xl mb-3">
      <div class="flex justify-between items-center">
        <span class="font-bold">Total:</span>
        <span class="font-bold text-lg" id="chatbot-total">Rp 0</span>
      </div>
    </div>
  </div>

  <div class="p-4 border-t bg-white">
    <button onclick="proceedToCart()" id="chatbot-proceed-btn"
      class="w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
      disabled>
      ğŸ›’ Proceed to Cart
    </button>
  </div>

  <!-- Chat Input Form -->
  <div class="p-4 border-t bg-white">
    <form id="chat-form" class="flex gap-2">
      <input id="chat-input" type="text" placeholder="Search menu..."
        class="flex-1 p-2 border-2 border-orange-300 rounded-xl focus:outline-none focus:border-orange-600 text-sm"
        autocomplete="off" />
      <button type="submit" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-xl">ğŸ”</button>
    </form>
  </div>
</div>

<button id="chatbot-toggle-btn" onclick="toggleChatbot()" class="fixed right-80 top-4 bg-orange-700 text-white px-4 py-2 rounded-l-xl shadow-lg z-40 hidden">
  ğŸ’¬
</button>

<script src="script.js"></script>
</body>
</html>
